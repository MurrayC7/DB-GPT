(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{80937:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var r=n(46750),o=n(40431),i=n(86006),a=n(73702),c=n(95135),s=n(47562),l=n(13809),u=n(96263),d=n(38295),h=n(86601),f=n(89587),p=n(91559),m=n(48527),g=n(9268);let j=["component","direction","spacing","divider","children","className","useFlexGap"],Z=(0,f.Z)(),v=(0,u.Z)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function x(e){return(0,d.Z)({props:e,name:"MuiStack",defaultTheme:Z})}let y=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],k=({ownerState:e,theme:t})=>{let n=(0,o.Z)({display:"flex",flexDirection:"column"},(0,p.k9)({theme:t},(0,p.P$)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let r=(0,m.hB)(t),o=Object.keys(t.breakpoints.values).reduce((t,n)=>(("object"==typeof e.spacing&&null!=e.spacing[n]||"object"==typeof e.direction&&null!=e.direction[n])&&(t[n]=!0),t),{}),i=(0,p.P$)({values:e.direction,base:o}),a=(0,p.P$)({values:e.spacing,base:o});"object"==typeof i&&Object.keys(i).forEach((e,t,n)=>{let r=i[e];if(!r){let r=t>0?i[n[t-1]]:"column";i[e]=r}}),n=(0,c.Z)(n,(0,p.k9)({theme:t},a,(t,n)=>e.useFlexGap?{gap:(0,m.NA)(r,t)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${y(n?i[n]:e.direction)}`]:(0,m.NA)(r,t)}}))}return(0,p.dt)(t.breakpoints,n)};var b=n(50645),P=n(88930);let S=function(e={}){let{createStyledComponent:t=v,useThemeProps:n=x,componentName:c="MuiStack"}=e,u=()=>(0,s.Z)({root:["root"]},e=>(0,l.Z)(c,e),{}),d=t(k),f=i.forwardRef(function(e,t){let c=n(e),s=(0,h.Z)(c),{component:l="div",direction:f="column",spacing:p=0,divider:m,children:Z,className:v,useFlexGap:x=!1}=s,y=(0,r.Z)(s,j),k=u();return(0,g.jsx)(d,(0,o.Z)({as:l,ownerState:{direction:f,spacing:p,useFlexGap:x},ref:t,className:(0,a.Z)(k.root,v)},y,{children:m?function(e,t){let n=i.Children.toArray(e).filter(Boolean);return n.reduce((e,r,o)=>(e.push(r),o<n.length-1&&e.push(i.cloneElement(t,{key:`separator-${o}`})),e),[])}(Z,m):Z}))});return f}({createStyledComponent:(0,b.Z)("div",{name:"JoyStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,P.Z)({props:e,name:"JoyStack"})});var w=S},96263:function(e,t,n){"use strict";var r=n(9312);let o=(0,r.ZP)();t.Z=o},3146:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(86006);function o(){let[,e]=r.useReducer(e=>e+1,0);return e}},30976:function(e,t,n){Promise.resolve().then(n.bind(n,26257))},26257:function(e,t,n){"use strict";n.r(t);var r=n(9268),o=n(56008),i=n(86006),a=n(78635),c=n(90545),s=n(80937),l=n(44334),u=n(311),d=n(22046),h=n(83192),f=n(23910),p=n(90734),m=n(89749),g=n(76708);t.default=()=>{let e=(0,o.useRouter)(),{mode:t}=(0,a.tv)(),n=(0,o.useSearchParams)().get("spacename"),j=(0,o.useSearchParams)().get("documentid"),[Z,v]=(0,i.useState)(0),[x,y]=(0,i.useState)(0),[k,b]=(0,i.useState)([]),{t:P}=(0,g.$G)();return(0,i.useEffect)(()=>{(async function(){let e=await (0,m.PR)("/knowledge/".concat(n,"/chunk/list"),{document_id:j,page:1,page_size:20});e.success&&(b(e.data.data),v(e.data.total),y(e.data.page))})()},[]),(0,r.jsxs)(c.Z,{className:"p-4 h-[90%]",children:[(0,r.jsx)(s.Z,{className:"mb-5",direction:"row",justifyContent:"flex-start",alignItems:"center",children:(0,r.jsxs)(l.Z,{"aria-label":"breadcrumbs",children:[(0,r.jsx)(u.Z,{onClick:()=>{e.push("/datastores")},underline:"hover",color:"neutral",fontSize:"inherit",children:P("Knowledge_Space")},"Knowledge Space"),(0,r.jsx)(u.Z,{onClick:()=>{e.push("/datastores/documents?name=".concat(n))},underline:"hover",color:"neutral",fontSize:"inherit",children:P("Documents")},"Knowledge Space"),(0,r.jsx)(d.ZP,{fontSize:"inherit",children:P("Chunks")})]})}),(0,r.jsx)(c.Z,{className:"p-4 overflow-auto h-[90%]",sx:{"&::-webkit-scrollbar":{display:"none"}},children:k.length?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(h.Z,{color:"primary",variant:"plain",size:"lg",sx:{"& tbody tr: hover":{backgroundColor:"light"===t?"rgb(246, 246, 246)":"rgb(33, 33, 40)"},"& tbody tr: hover a":{textDecoration:"underline"}},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:P("Name")}),(0,r.jsx)("th",{children:P("Content")}),(0,r.jsx)("th",{children:P("Meta_Data")})]})}),(0,r.jsx)("tbody",{children:k.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.doc_name}),(0,r.jsx)("td",{children:(0,r.jsx)(f.Z,{content:e.content,trigger:"hover",children:e.content.length>10?"".concat(e.content.slice(0,10),"..."):e.content})}),(0,r.jsx)("td",{children:(0,r.jsx)(f.Z,{content:JSON.stringify(e.meta_info||"{}",null,2),trigger:"hover",children:e.meta_info.length>10?"".concat(e.meta_info.slice(0,10),"..."):e.meta_info})})]},e.id))})]})}):(0,r.jsx)(r.Fragment,{})}),(0,r.jsx)(s.Z,{className:"mt-5",direction:"row",justifyContent:"flex-end",children:(0,r.jsx)(p.Z,{defaultPageSize:20,showSizeChanger:!1,current:x,total:Z,onChange:async e=>{let t=await (0,m.PR)("/knowledge/".concat(n,"/chunk/list"),{document_id:j,page:e,page_size:20});t.success&&(b(t.data.data),v(t.data.total),y(t.data.page))},hideOnSinglePage:!0})})]})}},53534:function(e,t,n){"use strict";var r=n(24214),o=n(52040);let i=r.Z.create({baseURL:o.env.API_BASE_URL});i.defaults.timeout=1e4,i.interceptors.response.use(e=>e.data,e=>Promise.reject(e)),t.Z=i},89749:function(e,t,n){"use strict";n.d(t,{Ej:function(){return d},Kw:function(){return l},PR:function(){return u},Tk:function(){return s}});var r=n(21628),o=n(53534),i=n(84835);let a={"content-type":"application/json"},c=e=>{if(!(0,i.isPlainObject)(e))return JSON.stringify(e);let t={...e};for(let e in t){let n=t[e];"string"==typeof n&&(t[e]=n.trim())}return JSON.stringify(t)},s=(e,t)=>{if(t){let n=Object.keys(t).filter(e=>void 0!==t[e]&&""!==t[e]).map(e=>"".concat(e,"=").concat(t[e])).join("&");n&&(e+="?".concat(n))}return o.Z.get("/api"+e,{headers:a}).then(e=>e).catch(e=>{r.ZP.error(e),Promise.reject(e)})},l=(e,t)=>{let n=c(t);return o.Z.post("/api"+e,{body:n,headers:a}).then(e=>e).catch(e=>{r.ZP.error(e),Promise.reject(e)})},u=(e,t)=>o.Z.post(e,t,{headers:a}).then(e=>e).catch(e=>{r.ZP.error(e),Promise.reject(e)}),d=(e,t)=>o.Z.post(e,t).then(e=>e).catch(e=>{r.ZP.error(e),Promise.reject(e)})}},function(e){e.O(0,[180,355,932,358,649,191,569,15,743,767,635,548,253,769,744],function(){return e(e.s=30976)}),_N_E=e.O()}]);